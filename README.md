# vim_cbc

ä¸€ä¸ª Neovim æ’ä»¶ï¼Œç”¨äºåœ¨ä¾§è¾¹åˆ†å±ä¸­æ‰“å¼€ Codebuddy Code ç»ˆç«¯ï¼Œæ”¯æŒå¿«æ·é”®å¿«é€Ÿåˆ‡æ¢çª—å£ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ åœ¨å³ä¾§ï¼ˆæˆ–å·¦ä¾§ï¼‰åˆ†å±æ‰“å¼€ Codebuddy Code ç»ˆç«¯
- ğŸ’¾ æŒä¹…åŒ–ç»ˆç«¯ä¼šè¯ï¼ˆéšè—åä¿æŒä¼šè¯çŠ¶æ€ï¼Œä¸å…³é—­ï¼‰
- âŒ¨ï¸  å¿«æ·é”®å¿«é€Ÿåˆ‡æ¢çª—å£ç„¦ç‚¹
- âš™ï¸  çµæ´»çš„é…ç½®é€‰é¡¹ï¼ˆçª—å£å®½åº¦ã€ä½ç½®ã€è‡ªåŠ¨æ’å…¥æ¨¡å¼ç­‰ï¼‰
- ğŸ¯ è‡ªåŠ¨è¿›å…¥ç»ˆç«¯æ’å…¥æ¨¡å¼
- ğŸ“¦ æ ‡å‡† Neovim æ’ä»¶ç»“æ„ï¼Œæ˜“äºå®‰è£…

## å®‰è£…

### ä½¿ç”¨ vim-plug

åœ¨æ‚¨çš„ `~/.config/nvim/init.vim` ä¸­æ·»åŠ ï¼š

```vim
Plug 'fcdtc/vim_cbc'
```

ç„¶åæ‰§è¡Œï¼š
```vim
:PlugInstall
```

### ä½¿ç”¨ packer.nvim

```lua
use '/Users/congfei/github/vim_cbc'
```

### ä½¿ç”¨ lazy.nvim

```lua
{
  dir = '/Users/congfei/github/vim_cbc',
  config = function()
    require('vim_cbc').setup()
  end
}
```

## é…ç½®

### é»˜è®¤é…ç½®

```lua
require('vim_cbc').setup({
  width = 0.5,                -- çª—å£å®½åº¦ï¼ˆ0-1ä¸ºç™¾åˆ†æ¯”ï¼Œ>1ä¸ºç»å¯¹åˆ—æ•°ï¼‰
  position = 'right',         -- ä½ç½®ï¼š'right' æˆ– 'left'
  command = 'codebuddy-code', -- æ‰§è¡Œçš„å‘½ä»¤
  auto_insert = true,         -- æ‰“å¼€æ—¶æ˜¯å¦è‡ªåŠ¨è¿›å…¥æ’å…¥æ¨¡å¼
  close_on_exit = false       -- å‘½ä»¤é€€å‡ºæ—¶æ˜¯å¦å…³é—­ç»ˆç«¯
})
```

### é…ç½®ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šå³ä¾§å  50% å®½åº¦
```lua
require('vim_cbc').setup({
  width = 0.5,
  position = 'right',
})
```

#### ç¤ºä¾‹ 2ï¼šå·¦ä¾§å›ºå®š 80 åˆ—
```lua
require('vim_cbc').setup({
  width = 80,
  position = 'left',
  auto_insert = false,
})
```

#### ç¤ºä¾‹ 3ï¼šåœ¨ init.vim ä¸­é…ç½®
```vim
Plug '/Users/congfei/github/vim_cbc'

lua << EOF
require('vim_cbc').setup({
  width = 0.4,
  position = 'right',
  auto_insert = true
})
EOF
```

## ä½¿ç”¨æ–¹æ³•

### å¿«æ·é”®

| å¿«æ·é”® | æ¨¡å¼ | åŠŸèƒ½ |
|--------|------|------|
| `<leader>cb` | Normal | åˆ‡æ¢ Codebuddy ç»ˆç«¯æ˜¾ç¤º/éšè— |
| `<C-h>` | Terminal | ä»ç»ˆç«¯è¿”å›åˆ°ç¼–è¾‘å™¨çª—å£ |
| `<Esc><Esc>` | Terminal | é€€å‡ºç»ˆç«¯æ’å…¥æ¨¡å¼åˆ°æ™®é€šæ¨¡å¼ |

### å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `:CodebuddyToggle` | åˆ‡æ¢ç»ˆç«¯æ˜¾ç¤º/éšè— |
| `:CodebuddyOpen` | æ‰“å¼€ç»ˆç«¯ |
| `:CodebuddyClose` | å…³é—­ç»ˆç«¯ |

### ä½¿ç”¨æµç¨‹

1. åœ¨ Neovim ä¸­æŒ‰ `<leader>cb`ï¼ˆé»˜è®¤ leader é”®æ˜¯ `\`ï¼‰æ‰“å¼€ Codebuddy ç»ˆç«¯
2. ç»ˆç«¯ä¼šè‡ªåŠ¨æ‰§è¡Œ `codebuddy-code` å‘½ä»¤å¹¶è¿›å…¥äº¤äº’æ¨¡å¼
3. åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ Codebuddy Code è¿›è¡Œç¼–ç¨‹
4. æŒ‰ `<C-h>` å¿«é€Ÿè¿”å›å·¦ä¾§ç¼–è¾‘å™¨çª—å£
5. å†æ¬¡æŒ‰ `<leader>cb` å¯ä»¥éšè—ç»ˆç«¯ï¼ˆä¼šè¯ä¿æŒï¼‰
6. æŒ‰ `<Esc><Esc>` å¯ä»¥åœ¨ç»ˆç«¯ä¸­é€€å‡ºæ’å…¥æ¨¡å¼ï¼Œä½¿ç”¨æ™®é€šæ¨¡å¼å¯¼èˆª

## API æ¥å£

```lua
local cbc = require('vim_cbc')

-- åˆå§‹åŒ–é…ç½®
cbc.setup({...})

-- åˆ‡æ¢ç»ˆç«¯
cbc.toggle()

-- æ‰“å¼€ç»ˆç«¯
cbc.open()

-- å…³é—­ç»ˆç«¯
cbc.close()

-- ç„¦ç‚¹è¿”å›ç¼–è¾‘å™¨
cbc.focus_editor()
```

## å·¥ä½œåŸç†

1. **æŒä¹…åŒ–ä¼šè¯**ï¼šä½¿ç”¨ `bufhidden=hide` ä¿æŒç»ˆç«¯ buffer åœ¨çª—å£å…³é—­åä¸è¢«é”€æ¯
2. **çª—å£ç®¡ç†**ï¼šåŠ¨æ€åˆ›å»ºå’Œé”€æ¯çª—å£ï¼Œä¿ç•™ buffer çŠ¶æ€
3. **ç„¦ç‚¹è¿½è¸ª**ï¼šè®°å½•ä¸Šä¸€ä¸ªæ´»åŠ¨çª—å£ï¼Œå®ç°å¿«é€Ÿè¿”å›
4. **çµæ´»é…ç½®**ï¼šæ”¯æŒç™¾åˆ†æ¯”å’Œç»å¯¹å€¼ä¸¤ç§çª—å£å®½åº¦é…ç½®æ–¹å¼

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ›´æ”¹é»˜è®¤çš„å¿«æ·é”®ï¼Ÿ

A: æ‚¨å¯ä»¥åœ¨ init.vim ä¸­è‡ªå®šä¹‰å¿«æ·é”®æ˜ å°„ï¼š

```vim
" ä½¿ç”¨ F12 æ›¿ä»£ <leader>cb
nnoremap <silent> <F12> :lua require('vim_cbc').toggle()<CR>

" ä½¿ç”¨ <C-j> æ›¿ä»£ <C-h>
tnoremap <silent> <C-j> <C-\><C-n>:lua require('vim_cbc').focus_editor()<CR>
```

### Q: å¦‚ä½•ä¿®æ”¹ç»ˆç«¯çª—å£çš„ä½ç½®ï¼Ÿ

A: åœ¨ setup ä¸­ä¿®æ”¹ position å‚æ•°ï¼š

```lua
require('vim_cbc').setup({
  position = 'left'  -- æ”¹ä¸ºå·¦ä¾§
})
```

### Q: ç»ˆç«¯å…³é—­åä¼šè¯ä¸¢å¤±å—ï¼Ÿ

A: ä¸ä¼šã€‚æ’ä»¶ä½¿ç”¨æŒä¹…åŒ–è®¾è®¡ï¼Œéšè—ç»ˆç«¯çª—å£æ—¶ä¼šä¿ç•™ä¼šè¯çŠ¶æ€ï¼Œå†æ¬¡æ‰“å¼€æ—¶å¯ä»¥ç»§ç»­ä¹‹å‰çš„å·¥ä½œã€‚

### Q: å¯ä»¥æ‰§è¡Œå…¶ä»–å‘½ä»¤è€Œä¸æ˜¯ codebuddy-code å—ï¼Ÿ

A: å¯ä»¥ã€‚åœ¨ setup ä¸­ä¿®æ”¹ command å‚æ•°ï¼š

```lua
require('vim_cbc').setup({
  command = 'your-command-here'
})
```

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ç›¸å…³é“¾æ¥

- [Codebuddy Code å®˜ç½‘](https://codebuddy.woa.com)
- [ä½¿ç”¨æ–‡æ¡£](https://iwiki.woa.com/p/4015845000)
